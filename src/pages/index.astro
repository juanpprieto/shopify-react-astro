---
import ProductListing from '../components/ProductListing.jsx';
import MainLayout from '../layouts/main.astro'
import getProductList from '../api/getProductList.js'
import CountProvider from '../context/CountProvider.jsx'
const { request, ...astro } = Astro

let products = await getProductList()
---

<MainLayout title={'products'}>
  <CountProvider products={products}>
    <ProductListing client:load products={products} />
  </CountProvider>
</MainLayout>
