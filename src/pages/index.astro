---
import ProductListing from '../components/ProductListing.jsx';
import MainLayout from '../layouts/main.astro'
import getProductList from '../api/getProductList.js'

let products = await getProductList()
---

<MainLayout title={'products'}>
  <ul class="products">
    {products?.length
      ? products.map((p) => {
          return <ProductListing product={p.node} key={p.handle} />
        })
      : null
    }
  </ul>
</MainLayout>
